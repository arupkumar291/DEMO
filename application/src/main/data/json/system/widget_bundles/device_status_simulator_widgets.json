{
  "widgetsBundle": {
    "alias": "device_status_simulator_widgets",
    "title": "设备状态模拟器部件包",
    "image": null
  },
  "widgetTypes": [
    {
      "alias": "aeration_widget",
      "name": "风轮机",
      "descriptor": {
        "type": "latest",
        "sizeX": 7.5,
        "sizeY": 4.5,
        "resources": [],
        "templateHtml": "<div flex layout=\"row\">\n    <div class=\"svg-wrapper\">\n        <svg class=\"svg_2\" xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 612 612\">\n            <g>\n                <path id=\"svg_2\" d=\"m600.507,0l-589.012,0c-6.347,0 -11.494,5.147 -11.494,11.496l0,589.01c0,6.349 5.147,11.494 11.494,11.494l589.01,0c6.347,0 11.494,-5.145 11.494,-11.494l0,-589.01c0.002,-6.349 -5.145,-11.496 -11.492,-11.496zm-572.353,46.968c0,-10.389 8.424,-18.815 18.817,-18.815c10.397,0 18.817,8.426 18.817,18.815c0,10.397 -8.42,18.817 -18.817,18.817c-10.393,-0.001 -18.817,-8.421 -18.817,-18.817zm277.847,504.9c-135.785,0 -245.87,-110.079 -245.87,-245.868s110.085,-245.868 245.87,-245.868c135.783,0 245.874,110.079 245.874,245.868s-110.091,245.868 -245.874,245.868zm259.034,31.981c-10.397,0 -18.817,-8.426 -18.817,-18.817c0,-10.397 8.42,-18.815 18.817,-18.815c10.385,0 18.813,8.42 18.813,18.815c0,10.391 -8.426,18.817 -18.813,18.817z\" />\n            </g>\n        </svg>\n        <svg class=\"svg_1\" viewBox=\"0 0 612 612\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g>\n                <path id=\"svg_1\" ng-style=\"status === 'ON' && {'fill':'green'} || status === 'OFF' && {'fill':'#a41313'}\"\n                    d=\"m515.491,347.273l-150.343,-48.133a56.304,56.304 0 0 0 -2.573,-12.936a590.935,590.935 0 0 0 19.506,-6.955c59.815,-22.559 94.284,-47.785 102.447,-74.979c5.43,-18.091 -0.354,-36.035 -17.187,-53.336c-13.279,-13.649 -42.628,-34.07 -43.872,-34.931c-4.7,-3.262 -11.142,-2.152 -14.479,2.487l-92.931,129.078a56.825,56.825 0 0 0 -7.307,-0.488a56.77,56.77 0 0 0 -5.058,0.238c-0.408,-47.517 -6.297,-108.07 -31.19,-135.539c-9.669,-10.67 -21.449,-16.082 -35.015,-16.082l-0.002,0c-9.316,0 -19.448,2.662 -30.108,7.911c-13.205,6.504 -33.216,20.884 -42.181,27.502c-2.631,1.943 -4.319,3.223 -4.593,3.43a10.467,10.467 0 0 0 -4.127,8.825a10.425,10.425 0 0 0 2.017,5.716l97.799,133.387a56.232,56.232 0 0 0 -2.617,8.217c-31.962,-10.418 -72.041,-20.787 -105.023,-20.787c-25.975,0 -44.827,6.558 -56.027,19.49c-9.87,11.395 -13.436,27.152 -10.594,46.838c2.725,18.844 14.467,52.61 14.967,54.039c1.504,4.315 5.553,7.029 9.891,7.029c1.09,0 2.195,-0.17 3.283,-0.53l159.207,-52.49a56.944,56.944 0 0 0 5.606,4.791c-5.524,7.565 -11.258,15.743 -16.897,24.314c-35.133,53.406 -48.191,94.075 -38.811,120.872c6.243,17.83 21.471,28.95 45.262,33.052c12.286,2.12 31.687,2.565 45.802,2.565c6.125,0 10.209,-0.089 10.209,-0.089c5.716,-0.122 10.28,-4.804 10.255,-10.522l-0.701,-163.187a56.492,56.492 0 0 0 8.953,-4.64c4.638,6.322 9.57,12.841 14.812,19.413c39.6,49.625 74.011,74.789 102.278,74.789c13.323,0 32.206,-5.697 46.505,-32.841c8.871,-16.842 19.237,-51.062 19.672,-52.509c1.655,-5.475 -1.388,-11.265 -6.835,-13.009zm-206.741,-14.562c-16.031,0 -29.033,-13 -29.033,-29.037s13.002,-29.035 29.033,-29.035c16.037,0 29.037,12.998 29.037,29.035c0,16.038 -13,29.037 -29.037,29.037z\" />\n            </g>\n        </svg>\n    </div>\n    <div class=\"value-container\"><span ng-style=\"status === 'ON' && {'color':'green'} || status === 'OFF' && {'color':'#a41313'}\">{{status === \"ON\" ? onLabel:offLabel}}</span></div>\n</div>",
        "templateCss": "@keyframes spin {\n  100% { transform: rotate(360deg); }\n}\n\n#container {\n    padding: 10px;\n}\n\n.svg-wrapper {\n    position: relative;\n    width: 260px;\n    height: 260px;\n}\n\n.svg_2, .svg2 {\n  width: 100%;\n  height: 100%;\n}\n\n#svg_2 {\n  fill: #2c3e50;\n}\n\n.svg_1 {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  animation: spin linear infinite;\n}\n\n#svg_1 {\n  /*fill: green*/\n  /* fill: #a41313; */\n}\n\n.value-container {\n    flex-grow: 1;\n    margin: auto;\n    text-align: center;\n}\n.value-container span {\n    margin-right: 10px;\n    font-size: 48px;\n}",
        "controllerScript": "var scope, speed, increment, flag;\n\nself.onInit = function() {\n    scope = self.ctx.$scope;\n    var settings = self.ctx.settings;\n    scope.onLabel=settings.onLabel || \"运转中\";\n    scope.offLabel=settings.offLabel || \"已停止\";\n    $timeout = scope.$injector.get('$timeout');\n    speed = 0;\n    increment = 0;\n}\n\nself.onDataUpdated = function() {\n    if(!angular.isUndefined(self.ctx.defaultSubscription.data[0].data[0])) {\n        scope.status = self.ctx.defaultSubscription.data[0].data[0][1];\n        if(scope.status == \"ON\") {\n            window.globalFlag = true;\n            flag = false;\n            $timeout(function() {\n                window.requestAnimationFrame(actionStatus);\n            });\n        }\n    }\n}\n\nfunction actionStatus() {\n    speed += increment;\n    //angular.element('.svg_1').css('transform', 'rotate(' + speed + 'deg)');\n    $('.svg_1', self.ctx.$container).css('transform', 'rotate(' + speed + 'deg)');\n    if(scope.status == 'ON') {\n        if(increment < 10) {\n            increment += 0.025;\n        }\n    } else if(scope.status == \"OFF\") {\n        if (!flag) {\n            flag = true;\n            scope.$apply();\n        }\n        if (increment > 0) {\n            increment -= 0.025;\n        } else {\n            return;\n        }\n    }\n    if (window.globalFlag) {\n        window.requestAnimationFrame(actionStatus);\n    } else {\n        return;\n    }\n}\n\nself.typeParameters = function() {\n    return {\n        maxDatasources: 1,\n        maxDataKeys: 1\n    };\n}\n\nself.onDestroy = function() {\n    window.globalFlag = false;\n}\n",
        "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n            \"onLabel\": {\n                \"title\": \"正常工作时显示为：\",\n                \"type\": \"string\",\n                \"default\": \"运转中\"\n            },\n            \"offLabel\": {\n                \"title\": \"停止工作时显示为：\",\n                \"type\": \"string\",\n                \"default\": \"已停止\"\n            }\n        },\n        \"required\": [\"onLabel\", \n                     \"offLabel\"]\n    },\n    \"form\": [\n        \"onLabel\",\n        \"offLabel\"\n    ]\n}",
        "dataKeySettingsSchema": "{}\n",
        "defaultConfig": "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Sin\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.22676435865325417,\"funcBody\":\"var v = Math.round(1000*Math.sin(time/5000)) ;\\nreturn v > 500 ? \\\"ON\\\" : \\\"OFF\\\";\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{},\"title\":\"风轮机\",\"dropShadow\":true,\"enableFullscreen\":true,\"enableDataExport\":true,\"widgetStyle\":{},\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"useDashboardTimewindow\":true,\"showLegend\":false,\"actions\":{}}"
      }
    },
    {
      "alias": "Wind_turbine_widget",
      "name": "风力发电机",
      "descriptor": {
        "type": "latest",
        "sizeX": 7.5,
        "sizeY": 4.5,
        "resources": [],
        "templateHtml": "<div flex layout=\"row\">\n    <div class=\"svg-wrapper\">\n        <svg class=\"svg_2\" xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"285 -45 630 630\"  style=\"border:0px solid #cd0000;\">\n            <g>\n                <path id=\"svg_2\" ng-style=\"status === 'ON' && {'fill':'green'} || status === 'OFF' && {'fill':'#a41313'}\" d=\"m 586.4566,308.03812 -17.2,288.8 c 0,0 9.6,19.1 38.2,19.1 28.6,0 38.2,-19.1 38.2,-19.1 l -17.199,-290.6 c -42.001,1.8 0.1,-0.1 -42.001,1.8 z\" />\n            </g>\n        </svg>\n        <svg class=\"svg_1\" viewBox=\"43 -81 630 630\"  style=\"border:0px solid #cd0000;\" xmlns=\"http://www.w3.org/2000/svg\">\n            <g>\n                <path id=\"svg_1\" ng-style=\"status === 'ON' && {'fill':'green'} || status === 'OFF' && {'fill':'#a41313'}\"\n                    d=\"m 674.465,133.4031 c -5.833,-6.552 -15.428,-9.6 -30.176,-9.6 -8.353,0 -17.01,0.999 -23.329,1.724 -2.276,0.264 -4.29,0.497 -5.918,0.634 -75.869,6.532 -149.097,30.561 -219.915,53.799 l -18.633,6.101 c -3.54,1.151 -6.045,4.169 -6.73,7.775 -1.506,-0.411 -3.048,-0.715 -4.6,-0.954 0.847,-3.565 -0.198,-7.333 -2.942,-9.839 l -18.632,-17 c -30.003,-27.401 -61.025,-55.73 -92.489,-82.649998 -25.682,-21.975 -47.261,-39.294 -67.948,-54.519 -0.532,-0.391 -1.491,-1.162 -2.784,-2.191 -18.075,-14.367 -36.636,-27.67500009 -49.994,-27.67500009 -7.684,0 -13.673,4.23999999 -16.006,11.33500009 -5.33,16.173 9.905,36.702 19.987,50.289 1.354,1.821 2.551,3.434 3.479,4.762 C 181.541,127.9461 239.108,179.4521 294.777,229.2641 l 14.266,12.78 c 1.902,1.704 4.326,2.597 6.776,2.597 1.121,0 2.236,-0.244 3.322,-0.624 0.396,1.501 0.887,2.977 1.456,4.433 -3.52,1.04 -6.273,3.834 -7.07,7.47 l -5.31,24.15 c -8.773,39.832 -17.846,81.017 -25.458,121.878 -6.167,33.102 -10.361,60.452 -13.201,86.053 -0.071,0.629 -0.249,1.766 -0.477,3.286 -5.198,34.299 -4.321,51.78 3.043,60.341 3.124,3.632 7.435,5.635 12.136,5.635 1.182,0 2.389,-0.127 3.611,-0.38 30.45655,-19.49018 44.25344,-59.20829 54.77857,-90.54767 11.37339,-34.14195 12.38443,-36.03678 20.40253,-67.44657 13.81641,-54.12388 24.74588,-90.09665 24.1949,-107.53476 l 3.966,-18.871 c 0.771,-3.656 -0.598,-7.349 -3.403,-9.742 0.542,-0.538 1.11,-1.05 1.623,-1.618 0.537,-0.594 1.009,-1.223 1.506,-1.841 1.902,1.8 4.372,2.825 6.938,2.825 1.024,0 2.06,-0.157 3.068,-0.477 l 22.244,-7.049 c 39.324,-12.445 79.992,-25.312 119.637,-39.324 30.667,-10.812 57.211,-21.143 81.179,-31.595 0.599,-0.264 1.729,-0.705 3.246,-1.298 34.02,-13.384 48.331,-23.035 51.039,-34.446 1.231,-5.22 -0.128,-10.382 -3.825,-14.515 z m -301.582,84.653 c 4.138,3.748 6.578,8.87 6.862,14.429 0.284,5.553 -1.623,10.888 -5.376,15.037 -3.94,4.377 -9.58,6.887 -15.468,6.887 -5.178,0 -10.153,-1.917 -14.002,-5.396 -8.53,-7.729 -9.2,-20.94 -1.476,-29.476 3.94,-4.376 9.58,-6.882 15.468,-6.882 5.178,-0.005 10.143,1.912 13.992,5.401 z m -63.865,-3.266 -0.715,-0.639 c -54.808,-49.042 -111.481,-99.751 -153.839,-160.375998 -1.024,-1.46 -2.333,-3.23 -3.819,-5.234 -10.057,-13.551 -15.737,-23.101 -16.954,-28.507 4.727,1.689 14.474,6.958 34.04,22.527 1.598,1.273 2.794,2.216 3.423,2.678 20.246,14.9 41.455,31.92 66.751,53.57 31.22,26.701998 62.121,54.923998 92.002,82.213998 l 5.254,4.793 c -5.913,2.937 -11.264,6.973 -15.772,11.979 -4.559,5.026 -8.049,10.787 -10.371,16.995 z m -6.223,291.601 c -6.709,15.498 -12.146,25.189 -16.208,28.933 -0.877,-4.812 -1.263,-15.879 2.546,-40.993 0.284,-1.866 0.492,-3.256 0.583,-4.062 2.784,-25.125 6.912,-52.009 12.988,-84.608 7.552,-40.531 16.589,-81.554 25.327,-121.224 l 1.425,-6.481 c 11.091,7.349 24.987,10.29 38.168,8.104 l -0.238,1.136 c -15.073,71.934 -30.652,146.317 -61.954,213.246 -0.755,1.623 -1.643,3.656 -2.637,5.949 z m 317.024,-342.914 c -1.871,0.735 -3.261,1.288 -3.966,1.597 -23.476,10.245 -49.574,20.393 -79.785,31.048 -39.329,13.906 -79.835,26.722 -119.002,39.116 l -4.95,1.567 c 0.852,-13.292 -3.342,-26.549 -12.065,-37.108 l 1.396,-0.457 c 69.723,-22.877 141.813,-46.531 215.335,-52.86 1.79,-0.157 4.002,-0.411 6.502,-0.695 6.156,-0.71 13.819,-1.592 21.006,-1.592 6.03,0 9.728,0.639 11.948,1.308 -3.844,3.181 -13.283,8.972 -36.419,18.076 z\" />\n            </g>\n        </svg>\n    </div>\n    <div class=\"value-container\"><span ng-style=\"status === 'ON' && {'color':'green'} || status === 'OFF' && {'color':'#a41313'}\">{{status === \"ON\" ? onLabel:offLabel}}</span></div>\n</div>",
        "templateCss": "@keyframes spin {\n  100% { transform: rotate(360deg); }\n}\n\n#container {\n    padding: 10px;\n}\n\n.svg-wrapper {\n    position: relative;\n    width: 260px;\n    height: 260px;\n}\n\n.svg_2, .svg2 {\n  width: 100%;\n  height: 100%;\n}\n\n#svg_2 {\n  fill: #2c3e50;\n}\n\n.svg_1 {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  animation: spin linear infinite;\n}\n\n#svg_1 {\n  /*fill: green*/\n  /* fill: #a41313; */\n}\n\n.value-container {\n    flex-grow: 1;\n    margin: auto;\n    text-align: center;\n}\n.value-container span {\n    margin-right: 10px;\n    font-size: 48px;\n}",
        "controllerScript": "var scope, speed, increment, flag;\n\nself.onInit = function() {\n    scope = self.ctx.$scope;\n    var settings = self.ctx.settings;\n    scope.onLabel=settings.onLabel || \"运转中\";\n    scope.offLabel=settings.offLabel || \"已停止\";\n    $timeout = scope.$injector.get('$timeout');\n    speed = 0;\n    increment = 0;\n}\n\nself.onDataUpdated = function() {\n    if(!angular.isUndefined(self.ctx.defaultSubscription.data[0].data[0])) {\n        scope.status = self.ctx.defaultSubscription.data[0].data[0][1];\n        if(scope.status == \"ON\") {\n            window.globalFlag = true;\n            flag = false;\n            $timeout(function() {\n                window.requestAnimationFrame(actionStatus);\n            });\n        }\n    }\n}\n\nfunction actionStatus() {\n    speed += increment;\n    //angular.element('.svg_1').css('transform', 'rotate(' + speed + 'deg)');\n    $('.svg_1', self.ctx.$container).css('transform', 'rotate(' + speed + 'deg)');\n    if(scope.status == 'ON') {\n        if(increment < 0.18) {\n            increment += 0.0025;\n        }else{\n            increment -= 0.0025;\n        }\n    } else if(scope.status == \"OFF\") {\n        if (!flag) {\n            flag = true;\n            scope.$apply();\n        }\n        if (increment > 0) {\n            increment -= 0.025;\n        } else {\n            return;\n        }\n    }\n    if (window.globalFlag) {\n       window.requestAnimationFrame(actionStatus);\n    } else {\n        return;\n    }\n}\n\nself.typeParameters = function() {\n    return {\n        maxDatasources: 1,\n        maxDataKeys: 1\n    };\n}\n\nself.onDestroy = function() {\n    window.globalFlag = false;\n}\n",
        "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"properties\": {\n            \"onLabel\": {\n                \"title\": \"正常工作时显示为：\",\n                \"type\": \"string\",\n                \"default\": \"运转中\"\n            },\n            \"offLabel\": {\n                \"title\": \"停止工作时显示为：\",\n                \"type\": \"string\",\n                \"default\": \"已停止\"\n            }\n        },\n        \"required\": [\"onLabel\", \n                     \"offLabel\"]\n    },\n    \"form\": [\n        \"onLabel\",\n        \"offLabel\"\n    ]\n}",
        "dataKeySettingsSchema": "{}\n",
        "defaultConfig": "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Sin\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.22676435865325417,\"funcBody\":\"var v = Math.round(1000*Math.sin(time/5000)) ;\\nreturn v > 500 ? \\\"ON\\\" : \\\"OFF\\\";\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"onLabel\":\"运转中\",\"offLabel\":\"已停止\"},\"title\":\"风力发电机\",\"dropShadow\":true,\"enableFullscreen\":true,\"enableDataExport\":true,\"widgetStyle\":{},\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"useDashboardTimewindow\":true,\"showLegend\":false,\"actions\":{}}"
      }
    }
  ]
}